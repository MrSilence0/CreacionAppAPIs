{% extends "base.html" %}
{% block content %}

<div style="max-width: 900px; margin: 20px auto; padding: 0 10px;">
    <a href="/" class="back-link" style="text-decoration: none; color: var(--text-main); font-weight: 600; display: flex; align-items: center;">
        <span style="font-size: 20px; margin-right: 8px;">‚Üê</span> Volver al Feed
    </a>
</div>

<div class="post-detail-container">
    <div class="post-image-side">
        <img src="{{ post.media_url }}" alt="Instagram post" style="width: 100%; display: block;">
    </div>
    
    <div class="post-info-side">
        <div class="user-info" style="display: flex; align-items: center; margin-bottom: 15px;">
        <img
            src="{{ post.profile_image }}"
            alt="Foto de perfil"
            style="
                width: 32px;
                height: 32px;
                border-radius: 50%;
                object-fit: cover;
                margin-right: 10px;
                border: 1px solid var(--border);
            ">
            <span style="font-weight: 600;">osw_ib45</span>
        </div>
        
        <h3 style="margin: 0 0 10px 0;">{{ post.title }}</h3>
        <p style="color: var(--text-muted); line-height: 1.5;">{{ post.body }}</p>

        <a href="{{ post.permalink }}" target="_blank" class="btn-instagram">
            <img src="https://upload.wikimedia.org/wikipedia/commons/e/e7/Instagram_logo_2016.svg" style="width: 16px; margin-right: 8px;">
            Ver publicaci√≥n original
        </a>

        <hr style="border: 0; border-top: 1px solid var(--border); margin: 20px 0;">
        
        <h4 style="margin-bottom: 15px;">üéµ M√∫sica Sugerida</h4>

        <div class="spotify-wrapper">
    {% if post.track_id %}
<iframe
    style="border-radius:12px"
    src="https://open.spotify.com/embed/track/{{ post.track_id }}"
    width="100%"
    height="152"
    frameborder="0"
    allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture">
</iframe>
{% endif %}

</div>
        <div style="margin-top: auto; padding-top: 20px;">
            <form class="favorite-form"
                data-post-id="{{ post.id }}"
                data-track-id="{{ post.track_id }}"
                data-title="{{ post.title }}">

                <button type="button" class="favorite-btn" id="favoriteBtn">
                    ‚≠ê Guardar en favoritos
                </button>

                <p class="favorite-msg" id="favoriteMsg"></p>
            </form>
        </div>
    </div>
</div>
{% endblock %}